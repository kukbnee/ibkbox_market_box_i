<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ibk.sb.restapi.biz.service.product.single.repo.SingleProductRepo">

    <sql id="MARKET"><include refid="com.ibk.sb.restapi.biz.service.common.repo.SchemaRepo.MARKET"/></sql>

    <!--    PagingMapper ID-->
    <sql id="pagingHeader"><include refid="com.ibk.sb.restapi.biz.service.common.repo.PageRepo.pageHeader"/></sql>
    <sql id="pagingFooter"><include refid="com.ibk.sb.restapi.biz.service.common.repo.PageRepo.pageFooter"/></sql>

    <!--    상품 리스트 조회   -->
    <select id="selectSingleProductList" parameterType="RequestSearchProductVO" resultType="SummarySingleProductVO">
        <include refid="pagingHeader"/>
            SELECT
                TBMPIM.PDF_INFO_ID

                , TBMPIM.SELR_USIS_ID
                , TBMFIM.BPLC_NM AS SELR_USIS_NAME
                , TBMSIM.MMBRTYPE_ID

                , TBMPIM.PDF_NM
                , TBMPIM.BRF_DESC
                , TBMPIM.AGEN_INF_ID
                , CASE WHEN TBMPIM.AGEN_INF_ID IS NULL THEN 'N' ELSE 'Y' END AS AGEN_STATE
                , TBMPIM.PDF_PGRS_YN

                , TBMPSL.PDF_PRC
                , TBMPSL.SALE_PRC
                , TBMPSL.PRC_DSCS_YN

                , TBMPSL.COM_PRCUT_ID
                , TBMCCD.COM_CD_NM AS COM_PRCUT_NAME

                , TBMPSL.ORDN_QTY_LMTN_USYN
                , TBMPSL.ORDN_MNMM_QTY
                , TBMPSL.ORDN_MXMM_QTY_YN
                , TBMPSL.ORDN_MXMM_QTY

                , TBMPFR.FILE_ID AS IMG_FILE_ID

                <choose>
                    <when test="loginUserId != null and !loginUserId.equals('') and loginUtlinsttId != null and !loginUtlinsttId.equals('')">
                        , CASE WHEN TBMPIH.RGSN_USER_ID IS NULL THEN 'N' ELSE 'Y' END AS WISH_FLG
                    </when>
                    <otherwise>
                        , 'N' AS WISH_FLG
                    </otherwise>
                </choose>

                , NVL(WISHCNT.WISH_CNT, 0) AS WISH_CNT
                , NVL(VIEWCNT.VIEW_CNT, 0) AS VIEW_CNT
                , NVL(INQUCNT.INQU_CNT, 0) AS INQU_CNT
                , NVL(DEALCNT.DEAL_CNT, 0) AS DEAL_CNT
                , TBMPIM.PDF_STTS_ID
                , STATUS.COM_CD_NM                                  AS PDF_STTS_NM
                , DECODE(TBMPIM.PDF_STTS_ID, 'GDS00001', 'Y', 'N')  AS IS_ABLE_ADM_STOP_YN
                , DECODE(TBMPIM.PDF_STTS_ID, 'GDS00005', 'Y', 'N')  AS IS_ABLE_ADM_CANCEL_YN
                , TO_CHAR(TBMPIM.RGSN_TS, 'YYYY.MM.DD')             AS RGSN_DATE

                , TBMCC.TMS2_CLSF_NM
                , TBMCC.TMS3_CLSF_NM
                , TBMCC.TMS4_CLSF_NM
                , TBMCC.TMS5_CLSF_NM
                , (
                    SELECT
                        COUNT(A1.PDF_INFO_ID)
                    FROM
                        <include refid="MARKET"/>TB_BOX_MKT_ORDER_PDF_R A1
                        INNER JOIN <include refid="MARKET"/>TB_BOX_MKT_ORDER_INF_M A2 ON A2.ORDN_INFO_ID = A1.ORDN_INFO_ID
                        INNER JOIN <include refid="MARKET"/>TB_BOX_MKT_PDF_PAY_L A3 ON A2.STLM_INFO_ID = A3.STLM_INFO_ID AND A3.STLMSTTS_ID = 'PYS01003'
                    WHERE 1=1
                        AND A1.PDF_INFO_ID = TBMPIM.PDF_INFO_ID
                ) AS PAY_ORDER_CNT
        FROM <include refid="MARKET"/>TB_BOX_MKT_PDF_INF_M TBMPIM

            LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_FFPC_INF_M TBMFIM ON TBMFIM.UTLINSTT_ID = TBMPIM.SELR_USIS_ID
            LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_PDF_SAL_L TBMPSL ON TBMPSL.PDF_INFO_ID = TBMPIM.PDF_INFO_ID
            LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_PDF_FIE_R TBMPFR ON TBMPFR.PDF_INFO_ID = TBMPSL.PDF_INFO_ID AND TBMPFR.INFO_SQN = 1 AND FILE_PTRN_ID = #{filePtrnId}
            LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_COM_CD_D TBMCCD ON TBMCCD.COM_CD_ID = TBMPSL.COM_PRCUT_ID
            LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_COM_CD_D STATUS ON STATUS.COM_CD_ID = TBMPIM.PDF_STTS_ID
            INNER JOIN <include refid="MARKET"/>TB_BOX_MKT_SELR_INF_M TBMSIM ON TBMSIM.SELR_USIS_ID = TBMPIM.SELR_USIS_ID
            INNER JOIN <include refid="MARKET"/>TB_BOX_MKT_CTGY_C TBMCC ON TBMCC.CTGY_ID = TBMPIM.PDF_CTGY_ID

            <if test="loginUserId != null and !loginUserId.equals('') and loginUtlinsttId != null and !loginUtlinsttId.equals('')">
                LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_PDF_WISH_R TBMPIH ON TBMPIH.PUCS_USIS_ID = #{loginUtlinsttId} AND TBMPIH.PUCS_ID = #{loginUserId} AND TBMPIH.PDF_INFO_ID = TBMPIM.PDF_INFO_ID
            </if>

            LEFT JOIN (
                SELECT
                    PDF_INFO_ID ,SUM(1) AS WISH_CNT
                FROM <include refid="MARKET"/>TB_BOX_MKT_PDF_WISH_R
                WHERE 1 = 1
                    <if test="celebrityFlg != null and !celebrityFlg.equals('')">
                        AND CAST(RGSN_TS AS DATE) BETWEEN ADD_MONTHS(sysdate,-1) AND sysdate
                    </if>
                GROUP BY PDF_INFO_ID
            ) WISHCNT ON WISHCNT.PDF_INFO_ID = TBMPIM.PDF_INFO_ID

            LEFT JOIN (
                SELECT
                    PDF_INFO_ID ,SUM(1) AS VIEW_CNT
                FROM <include refid="MARKET"/>TB_BOX_MKT_PDF_INQ_H
                WHERE 1 = 1
                    AND PRHS_PTRN_ID = #{prhsPtrnId}
                    <if test="popularFlg != null and !popularFlg.equals('')">
                        AND CAST(RGSN_TS AS DATE) BETWEEN ADD_MONTHS(sysdate,-1) AND sysdate
                    </if>
                GROUP BY PDF_INFO_ID
            ) VIEWCNT ON VIEWCNT.PDF_INFO_ID = TBMPIM.PDF_INFO_ID

            LEFT JOIN (
                SELECT
                    TBMIM.PDF_INFO_ID, SUM(1) AS INQU_CNT
                FROM <include refid="MARKET"/>TB_BOX_MKT_INQU_M TBMIM
                LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_INQU_R TBMIR ON TBMIR.INQR_INFO_ID = TBMIM.INQR_INFO_ID
                WHERE 1 = 1
                    <if test="inquFlg != null and !inquFlg.equals('')">
                        AND CAST(TBMIR.AMNN_TS AS DATE) BETWEEN ADD_MONTHS(SYSDATE,-1) AND SYSDATE
                    </if>
                GROUP BY TBMIM.PDF_INFO_ID
            ) INQUCNT ON INQUCNT.PDF_INFO_ID = TBMPIM.PDF_INFO_ID

            LEFT JOIN (
                SELECT
                    PDF_INFO_ID
                    , SUM(1) AS DEAL_CNT
                FROM
                    <include refid="MARKET"/>TB_BOX_MKT_ORDER_PDF_R
                GROUP BY
                    PDF_INFO_ID
            ) DEALCNT ON DEALCNT.PDF_INFO_ID = TBMPIM.PDF_INFO_ID

        WHERE 1 = 1
                AND TBMPIM.DEL_YN = 'N'
                AND TBMPIM.PDF_PGRS_YN = 'Y' /* 진열함 */
                <if test="!adminSearchStatus">
                    <if test="pdfSttsId != null and !pdfSttsId.equals('')">
                        AND TBMPIM.PDF_STTS_ID = #{pdfSttsId}
                    </if>
                </if>
                <if test="pdfInfoCon != null and !pdfInfoCon.equals('')">
                    AND
                        (
                            LOWER(TBMPIM.PDF_NM) LIKE '%' || LOWER(#{pdfInfoCon}) || '%'
                            OR LOWER(TBMPIM.BRF_DESC) LIKE '%' || LOWER(#{pdfInfoCon}) || '%'
                            OR LOWER(TBMPIM.BRF_SUB_DESC) LIKE '%' || LOWER(#{pdfInfoCon}) || '%'
                            OR LOWER(TBMPIM.DTL_DESC) LIKE '%' || LOWER(#{pdfInfoCon}) || '%'
                            OR LOWER(TBMFIM.BPLC_NM) LIKE '%' || LOWER(#{pdfInfoCon}) || '%'
                            OR TBMPIM.PDF_INFO_ID IN (SELECT PDF_INFO_ID FROM <include refid="MARKET"/>TB_BOX_MKT_PDF_KWR_R WHERE LOWER(KWR) LIKE '%' || LOWER(#{pdfInfoCon}) || '%')
                        )
                </if>

                <if test="categoryId != null and !categoryId.equals('')">
                    AND SUBSTR(TBMPIM.PDF_CTGY_ID, 1, #{categoryDepth} * 2) = #{categoryId}
                </if>

                <if test="selrUsisId != null and !selrUsisId.equals('')">
                    AND TBMPIM.SELR_USIS_ID = #{selrUsisId}
                </if>

                <if test="agencyFlg != null and !agencyFlg.equals('')">
                    <if test="agencyFlg.equals('Y')">
                        AND TBMPIM.AGEN_INF_ID IS NOT NULL
                    </if>
                </if>

                <if test="relatedProductYn != null and !relatedProductYn.equals('')">
                    AND TBMPIM.PDF_INFO_ID != #{pdfInfoId}
                    AND TBMPIM.PDF_STTS_ID NOT IN ('GDS00002', 'GDS00005') /* 판매중지(GDS00002), 관리자판매중지(GDS00005) */
                </if>
            <choose>
                <when test="celebrityFlg != null and !celebrityFlg.equals('')">
                    ORDER BY NVL(WISHCNT.WISH_CNT, 0) DESC
                </when>

                <when test="popularFlg != null and !popularFlg.equals('')">
                    ORDER BY NVL(VIEWCNT.VIEW_CNT, 0) DESC
                </when>

                <when test="orderByDate != null and !orderByDate.equals('')">
                    ORDER BY TBMPIM.RGSN_TS DESC
                </when>

                <when test="orderByDeal != null and !orderByDeal.equals('')">
                    ORDER BY NVL(DEALCNT.DEAL_CNT, 0) DESC
                </when>

                <when test="inquFlg != null and !inquFlg.equals('')">
                    ORDER BY NVL(INQUCNT.INQU_CNT, 0) DESC
                </when>
            </choose>



        <include refid="pagingFooter"/>
    </select>

    <!--    상품 상세 조회    -->
    <select id="selectSingleProduct" parameterType="RequestSearchProductVO" resultType="SummarySingleProductVO">
        SELECT
            TBMPIM.PDF_INFO_ID
            , TBMPIM.SELR_USIS_ID
            , TBMPIM.PDF_CTGY_ID
            , '{'||TBMCC.TMS1_CLSF_NM||'},{'||TBMCC.TMS2_CLSF_NM||'},{'||TBMCC.TMS3_CLSF_NM||'},{'||TBMCC.TMS4_CLSF_NM||'},{'||TBMCC.TMS5_CLSF_NM||'}' AS CTGY_DATA
            , TBMCC.TMS2_CLSF_NM
            , TBMCC.TMS3_CLSF_NM
            , TBMCC.TMS4_CLSF_NM
            , TBMCC.TMS5_CLSF_NM
            , TBMIM.BPLC_NM AS SELR_USIS_NAME
            , TBMPIM.PDF_NM
            , TBMPIM.MDLNM
            , TBMPIM.AGEN_INF_ID
            , CASE WHEN TBMPIM.AGEN_INF_ID IS NULL THEN 'N' ELSE 'Y' END AS AGEN_STATE

            , TBMPSL.PDF_PRC
            , TBMPSL.SALE_PRC

            , TBMPIM.BRF_DESC
            , TBMPIM.BRF_SUB_DESC
            , TBMPIM.DTL_DESC
            , TBMPIM.PDF_STTS_ID
            , TO_CHAR(TBMPIM.RGSN_TS, 'YYYY-MM-DD HH24:MI:SS') AS RGSN_TS_STR

            , TBMPSL.COM_PRCUT_ID
            , TBMCCD.COM_CD_NM AS COM_PRCUT_NAME

            , TBMPSL.ORDN_QTY_LMTN_USYN
            , TBMPSL.ORDN_MNMM_QTY
            , TBMPSL.ORDN_MXMM_QTY_YN
            , TBMPSL.ORDN_MXMM_QTY
            , TBMPSL.PRC_DSCS_YN

            <choose>
                <when test="loginUserId != null and !loginUserId.equals('') and loginUtlinsttId != null and !loginUtlinsttId.equals('')">
                    , CASE WHEN TBMAIM.AGEN_INF_ID IS NULL THEN 'N' ELSE 'Y' END AS AGEN_REQ_STATE
                </when>
                <otherwise>
                    , 'N' AS AGEN_REQ_STATE
                </otherwise>
            </choose>
            <choose>
                <when test="loginUserId != null and !loginUserId.equals('') and loginUtlinsttId != null and !loginUtlinsttId.equals('')">
                    , CASE WHEN TBMPIH.RGSN_USER_ID IS NULL THEN 'N' ELSE 'Y' END AS WISH_FLG
                </when>
                <otherwise>
                    , 'N' AS WISH_FLG
                </otherwise>
            </choose>
        FROM <include refid="MARKET"/>TB_BOX_MKT_PDF_INF_M TBMPIM

        LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_PDF_SAL_L TBMPSL ON TBMPSL.PDF_INFO_ID = TBMPIM.PDF_INFO_ID
        LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_COM_CD_D TBMCCD ON TBMCCD.COM_CD_ID = TBMPSL.COM_PRCUT_ID
        LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_FFPC_INF_M TBMIM ON TBMIM.UTLINSTT_ID = TBMPIM.SELR_USIS_ID
        LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_CTGY_C TBMCC ON TBMCC.CTGY_ID = TBMPIM.PDF_CTGY_ID

        <if test="loginUserId != null and !loginUserId.equals('') and loginUtlinsttId != null and !loginUtlinsttId.equals('')">
            LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_PDF_WISH_R TBMPIH ON TBMPIH.PUCS_USIS_ID = #{loginUtlinsttId} AND TBMPIH.PUCS_ID = #{loginUserId} AND TBMPIH.PDF_INFO_ID = TBMPIM.PDF_INFO_ID
        </if>
        <if test="loginUserId != null and !loginUserId.equals('') and loginUtlinsttId != null and !loginUtlinsttId.equals('')">
            LEFT JOIN <include refid="MARKET"/>TB_BOX_MKT_AGEN_INF_M TBMAIM ON TBMAIM.PDF_INFO_ID = TBMPIM.PDF_INFO_ID AND TBMAIM.PCSNSTTS_ID IN ('COC01001', 'COC01003') AND TBMAIM.SEN_USIS_ID = #{loginUtlinsttId}
        </if>

        WHERE 1 = 1
            AND TBMPIM.PDF_INFO_ID = #{pdfInfoId}

    </select>

    <!--    개별 상품 조회  -->
    <select id="selectMySingleProduct" parameterType="string" resultType="SingleProductVO">
        SELECT
            PDF_INFO_ID
            ,SELR_USIS_ID
            ,PDF_CTGY_ID
            ,PDF_PGRS_YN
            ,PDF_STTS_ID
            ,PDF_NM
            ,MDLNM
            ,BRF_DESC
            ,BRF_SUB_DESC
            ,DTL_DESC
            ,PTNT_INFO_YN
            ,AGEN_INF_ID
            ,DEL_YN
            ,RGSN_USER_ID
            ,RGSN_TS
            ,AMNN_USER_ID
            ,AMNN_TS

        FROM
            <include refid="MARKET"/>TB_BOX_MKT_PDF_INF_M

        WHERE 1 = 1
            AND DEL_YN = 'N'
            AND PDF_INFO_ID = #{pdfInfoId}
    </select>

    <select id="selectMyProductSellerLastRtin" parameterType="String" resultType="ProductReturnVO">
        SELECT
            *
        FROM (
            SELECT
                TBMPRL.PDF_INFO_ID
                , TBMPRL.RTGD_INRC_TRM
                , TBMPRL.RTGD_EXP
                , TBMPRL.RTGD_INRC_PRCD
                , TBMPRL.RTGD_INRC_DSLN
                , TBMPIM.AMNN_TS
                , ROW_NUMBER() OVER(ORDER BY TBMPIM.RGSN_TS DESC) AS ROW_NUM
            FROM <include refid="MARKET"/>TB_BOX_MKT_PDF_INF_M TBMPIM
                INNER JOIN <include refid="MARKET"/>TB_BOX_MKT_PDF_RTIN_L TBMPRL ON TBMPIM.PDF_INFO_ID = TBMPRL.PDF_INFO_ID
            WHERE 1=1
                AND TBMPIM.DEL_YN = 'N'
                AND TBMPIM.SELR_USIS_ID = #{utlinsttId}
             )
        WHERE ROW_NUM = 1
    </select>

    <!--    상품 기본 정보 등록 -->
    <insert id="insertSingleProduct" parameterType="SingleProductVO">
        INSERT INTO <include refid="MARKET"/>TB_BOX_MKT_PDF_INF_M
        (
            PDF_INFO_ID
            , SELR_USIS_ID
            , PDF_CTGY_ID
            , PDF_PGRS_YN
            , PDF_STTS_ID
            , PDF_NM
            , MDLNM
            , BRF_DESC
            , BRF_SUB_DESC
            , DTL_DESC
            , PTNT_INFO_YN
            , AGEN_INF_ID
            , DEL_YN
            , RGSN_USER_ID
            , RGSN_TS
            , AMNN_USER_ID
            , AMNN_TS
        )
        VALUES
        (
            #{pdfInfoId}
            , #{selrUsisId}
            , #{pdfCtgyId}
            , #{pdfPgrsYn}
            , #{pdfSttsId}
            , #{pdfNm}
            , #{mdlnm}
            , #{brfDesc}
            , #{brfSubDesc}
            , #{dtlDesc}
            , #{ptntInfoYn}
            , #{agenInfId}
            , 'N'
            , #{rgsnUserId}
            , CURRENT_TIMESTAMP
            , #{amnnUserId}
            , CURRENT_TIMESTAMP
        )
    </insert>

    <!--    상품 기본 정보 수정 -->
    <update id="updateSingleProduct" parameterType="SingleProductVO">
        UPDATE
            <include refid="MARKET"/>TB_BOX_MKT_PDF_INF_M
        SET
            SELR_USIS_ID          = #{selrUsisId}
            , PDF_CTGY_ID         = #{pdfCtgyId}
            , PDF_PGRS_YN         = #{pdfPgrsYn}
            , PDF_STTS_ID         = #{pdfSttsId}
            , PDF_NM              = #{pdfNm}
            , MDLNM               = #{mdlnm}
            , BRF_DESC            = #{brfDesc}
            , BRF_SUB_DESC        = #{brfSubDesc}
            , DTL_DESC            = #{dtlDesc}
            , PTNT_INFO_YN        = #{ptntInfoYn}
            , AGEN_INF_ID         = #{agenInfId}
            , AMNN_USER_ID        = #{amnnUserId}
            , AMNN_TS             = CURRENT_TIMESTAMP
        WHERE PDF_INFO_ID = #{pdfInfoId}
    </update>

    <!--    마이페이지 상품관리 개별상품 삭제  -->
    <update id="deleteSingleProduct" parameterType="SingleProductVO">
        UPDATE <include refid="MARKET"/>TB_BOX_MKT_PDF_INF_M
        SET
            DEL_YN              = 'Y'
            , AMNN_USER_ID      = #{amnnUserId}
            , AMNN_TS           = CURRENT_TIMESTAMP

        WHERE PDF_INFO_ID = #{pdfInfoId}
    </update>

    <select id="selectPdfStts" parameterType="String" resultType="SingleProductVO">
        SELECT
            PDF_INFO_ID
             , PDF_STTS_ID
             , PDF_PGRS_YN
        FROM <include refid="MARKET"/>TB_BOX_MKT_PDF_INF_M
        WHERE 1=1
          AND PDF_INFO_ID = #{pdfInfoId}
    </select>

    <!--    <update id="updateProduct" parameterType="SingleProductVO">-->
<!--        UPDATE-->
<!--            IBKMKTUSER.TB_BOX_MKT_GDS_INF_M-->
<!--        SET-->
<!--            GDS_CTGY_ID = #{gdsCtgyId}-->
<!--              ,GDS_CTGY_ID     = #{gdsCtgyId}-->
<!--              ,GDS_STCD_ID     = #{gdsStcdId}-->
<!--              ,GDS_TTL         = #{gdsTtl}-->
<!--              ,GDS_MDLNM       = #{gdsMdlnm}-->
<!--              ,GDS_BRFDESC     = #{gdsBrfdesc}-->
<!--              ,GDS_DESC        = #{gdsDesc}-->
<!--              ,GDS_DTDC        = #{gdsDtdc}-->
<!--              ,GDS_KWR         = #{gdsKwr}-->
<!--              ,GDS_PRC         = #{gdsPrc}-->
<!--              ,GDS_SALE_PRC    = #{gdsSalePrc}-->
<!--              ,GDS_SALE_PEC    = #{gdsSalePec}-->
<!--              ,GDS_VIE_CNT     = #{gdsVieCnt}-->
<!--              ,ESM_YN          = #{esmYn}-->
<!--              ,ORDER_MIN_CNT   = #{orderMinCnt}-->
<!--              ,ORDER_MAX_YN    = #{orderMaxYn}-->
<!--              ,ORDER_MAX_CNT   = #{orderMaxCnt}-->
<!--              ,GDS_STOCK       = #{gdsStock}-->
<!--              ,PAT_YN          = #{patYn}-->
<!--              ,GDS_DEC_ID      = #{gdsDecId}-->
<!--              ,DCH_SEND_NAM    = #{dchSendNam}-->
<!--              ,DCH_SEND_TEL    = #{dchSendTel}-->
<!--              ,DCH_SEND_ADR    = #{dchSendAdr}-->
<!--              ,DCH_SEND_DADR   = #{dchSendDadr}-->
<!--              ,DCH_GDS_UNI_ID  = #{dchGdsUniId}-->
<!--              ,DCH_GDS_ITM_ID  = #{dchGdsItmId}-->
<!--              ,DCH_GDS_PRC     = #{dchGdsPrc}-->
<!--              ,DCH_GDS_STD_W   = #{dchGdsStdW}-->
<!--              ,DCH_GDS_STD_L   = #{dchGdsStdL}-->
<!--              ,DCH_GDS_STD_H   = #{dchGdsStdH}-->
<!--              ,DCH_GDS_STD_KG  = #{dchGdsStdKg}-->
<!--              ,GDS_RET_CON     = #{gdsRetCon}-->
<!--              ,GDS_RET_PRC_CON = #{gdsRetPrcCon}-->
<!--              ,GDS_RET_STP_CON = #{gdsRetStpCon}-->
<!--              ,GDS_RET_IMS_CON = #{gdsRetImsCon}-->
<!--              ,STCD_ID         = #{stcdId}-->
<!--              , AMNN_TS        = CURRENT_TIMESTAMP-->
<!--            WHERE-->
<!--            GDS_ID = #{gdsId}-->
<!--    </update>-->

<!--    <delete id="deleteProduct" parameterType="String">-->
<!--        DELETE FROM IBKMKTUSER.TB_BOX_MKT_GDS_INF_M-->
<!--        WHERE GDS_ID = #{gdsId}-->
<!--    </delete>-->

</mapper>